# Mantis Reporter
Инструмент, позволяющий пользователям анонимно отправлять баг-репорты в систему баг-треккинга Mantis.
Использует Soap API.

### Системные требования
 * PHP 7.0+
   * Параметры php
     * allow_url_fopen = On
   * Расширения php
     * intl (с корректно настроенной локалью)
     * SOAP

### Установка
 * Разместите файлы в директории веб-сервера.
 * Укажите логин и пароль от учетной записи Mantis в файле `conf/conf.php`.
 * Заполните прочие параметры в переменных, находящихся в файле настроек `conf/conf.php`. (Подробнее см. в разделе "Настройка скрипта").

 Для работы скрипта требуется учетная запись от Mantis с уровнем доступа **автор** и выше.
 Рекомендуется создать отдельную учетную запись для скрипта.

#### Настройка Mantis
 * Создайте отдельного пользователя с уровнем доступа не ниже "**автор**".
 * Добавьте созданного пользователя к тем проектам, по которым должен осуществляться сбор заявок через форму "Mantis Reporter".

#### Настройки скрипта
**Описание переменных в файле настроек `conf/conf.php`**
 * **MAIN_TITLE** - _(по-умолчанию: "Mantis Reporter")_ - Заголовок страницы (название сайта)
 * **FORCE_LOCALE** - _(Значения: "0" или "1". По-умолчанию: "0")_ - Принудительное определение локали (подробнее см. в разделе "Локализация")
 * **USERNAME** - Логин пользователя от которого будут создаваться задачи
 * **PASSWORD** - Пароль пользователя
 * **USERID** - ID пользователя от которого будут создаваться задачи
 * **MANTISURL** - URL mantis для подстановки в ссылку для перехода
 * **WSDL_POINT** - URL до API mantis (mantisconnect.php?wsdl)
 * **PROJECT_ID** - ID проекта из которого будет взят список типов задач. (Временное решение)
 * **USECAPTCHA** - _(Значения: "0" или "1". По-умолчанию: "0")_ - Включить/отключить использование Google Recaptcha.
 * **CAPTCHA_SITEKEY** - Ключ сайта Google ReCaptcha.
 * **CAPTCHA_SECRET** - Secret Key Google ReCaptcha.

### Локализация
Скрипт пытается определить локаль, заданную в php_intl, а затем, найти соответствующий файл локализации в директории **L10n**

Локаль можно выставить принудительно в файле `system.conf.php` в переменной **$FORCE_LOCALE**.
Значение по-умолчанию `$FORCE_LOCALE="0"`. Это означает, что скрипт будет пытаться определить локаль.
В случае, если определенная локаль не соответствует имеющимся локалям, будет выставлена локаль по-умолчанию *(на данный момент ru_RU)*
